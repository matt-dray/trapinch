---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# {trapinch} <img src="man/figures/logo.png" align="right" height="138" />

<!-- badges: start -->
[![Project Status: WIP – Initial development is in progress, but there has not yet been a stable, usable release suitable for the public.](https://www.repostatus.org/badges/latest/wip.svg)](https://www.repostatus.org/#wip)
[![R-CMD-check](https://github.com/matt-dray/trapinch/workflows/R-CMD-check/badge.svg)](https://github.com/matt-dray/trapinch/actions)
[![Codecov test coverage](https://codecov.io/gh/matt-dray/trapinch/branch/main/graph/badge.svg)](https://app.codecov.io/gh/matt-dray/trapinch?branch=main)
<!-- badges: end -->

An R package to interface with [the PokéAPI service](https://pokeapi.co/), based on [{httr2}](https://httr2.r-lib.org/).

Why 'Trapinch'? Because [it's a Pokémon](https://bulbapedia.bulbagarden.net/wiki/Trapinch_(Pok%C3%A9mon)) whose name contains 'R API' and it wasn't claimed on [Repokemon](https://cheeaun.github.io/repokemon/) yet, lol.

## Installation

You can install {trapinch} from GitHub with help from [{remotes}](https://remotes.r-lib.org/):

```{r install, eval=FALSE}
if (!require(remotes)) install.packages("remotes")
remotes::install_github("matt-dray/trapinch")
```

## Example

Functions are all prefaced `get_*()` and return a list. The generic request function is `get_pokeapi()`, to which you can provide an `endpoint` and `resource` of interest. Each endpoint also has its own function to which you need only supply the resource of interest, like `get_pokemon()` or `get_type()`.

For example, retrieve a named Pokémon's details:

```{r example-pokemon}
bulba <- trapinch::get_pokemon("bulbasaur")
bulba$moves[[1]]$move$name
```

Or retrieve an item's details:

```{r example-item}
ball <- trapinch::get_item("poke-ball")
ball$flavor_text_entries[[1]]$text
```

If you're wondering what endpoints and resources exist, you can find them in the `resource_lookups` list object. The endpoints:

```{r endpoints}
names(trapinch::resource_lookups)
```

And an example resource table for Pokémon types:

```{r resource}
head(trapinch::resource_lookups[["type"]])
```

# Expectations

I'm developing {trapinch} to familiarise myself with {httr2}, API handling and unit testing of functions that talk to the internet. Expect a lot of change, but it might not get updated much or often.

# Similar projects

Wrappers in several languages are named on [the PokéAPI website](https://pokeapi.co/docs/v2#wrap). None of these are for R, although I'm aware of [{pokedex} from UBC-MDS](https://github.com/UBC-MDS/pokedex) (not on CRAN).

# Thanks

This package was made easier with help from [the PokéAPI documentation](https://pokeapi.co/docs/v2), [the {httr2} documentation](https://httr2.r-lib.org/index.html) and [Colin Fay's post](https://colinfay.me/build-api-wrapper-package-r/).
